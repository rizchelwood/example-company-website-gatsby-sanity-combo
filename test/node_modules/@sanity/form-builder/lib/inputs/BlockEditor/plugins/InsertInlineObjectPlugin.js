"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = InsertInlineObjectPlugin;

var _slate = require("slate");

var _blockTools = require("@sanity/block-tools");

function InsertInlineObjectPlugin(blockContentType) {
  return {
    onCommand(command, editor, next) {
      if (command.type !== 'insertInlineObject') {
        return next();
      }

      var options = command.args[0] || {};
      var objectType = options.objectType;
      var key = options.key || (0, _blockTools.randomKey)(12);
      var inlineProps = {
        key,
        type: objectType.name,
        isVoid: true,
        data: {
          _key: key,
          value: {
            _type: objectType.name,
            _key: key
          }
        }
      };

      var inline = _slate.Inline.create(inlineProps);

      editor.insertInline(inline);
      return editor;
    }

  };
}